# 抓取快手直播王者荣耀板块中的所有直播信息

## 分析网页
```
在PC中打开快手官网，可以看到第二列是快手直播，
url是https://live.kuaishou.com/
然后点击王者荣耀模块，即可看到需要抓取的页面，打开浏览器开发者工具，
我们需要抓取每个主播直播中的详细信息，比如“主播名称”、“直播地址”、”观看人数“
分析请求url发现是一个ajax请求，点击https://live.kuaishou.com/liveStream/liveCardList，
可以看到都是一些json数据，完全不需要格式化，直接进行请求提取即可
```

## 如何实现多页抓取
```
分析刚刚那个ajax请求，发现该请求是一个post请求，一共有四个body参数
currentPage
gameId
pageSize
type
可以多点击几次下一页然后观察发现只有currentPage会并发，并且该参数就是页数
```

## 运行结果
```
python3 code.py
请输入需要抓取的页数:2
开始抓取第1页
{'title': '五个射手五排', 'gameName': '王者荣耀', 'playUrls': [{'quality': 'standard', 'url': 'https://tx-pclivemate.pull.yximgs.com/gifshow/L8fI5XLpyys_gn900m.flv?txSecret=11c092d5e1957da35c78204b8b6f12f8&txTime=5b4b15db&stat=JYn7ytKLp28WO0x1Zmnnz2mMGWJOstHMnaWCK4AZwn6sdESfAxOScLAAS%2BUygnJJ&tsc=cdn&highTraffic=1'}, {'quality': 'high', 'url': 'https://tx-pclivemate.pull.yximgs.com/gifshow/L8fI5XLpyys_gn1600m.flv?txSecret=54fff42b32bfa4b57ba19cdf675de60a&txTime=5b4b15db&stat=JYn7ytKLp28WO0x1Zmnnz2mMGWJOstHMnaWCK4AZwn6sdESfAxOScLAAS%2BUygnJJ&tsc=cdn&highTraffic=1'}, {'quality': 'super', 'url': 'https://tx-pclivemate.pull.yximgs.com/gifshow/L8fI5XLpyys.flv?txSecret=7a2acb4ec02b5f89e6f1dc001ab77e3e&txTime=5b4b15db&stat=JYn7ytKLp28WO0x1Zmnnz2mMGWJOstHMnaWCK4AZwn6sdESfAxOScLAAS%2BUygnJJ&highTraffic=1'}], 'user': {'eid': '3x45ncijesdbhsu', 'kwaiId': 'mac56789', 'userId': 701608945, 'id': 'mac56789', 'profile': 'https://tx2.a.yximgs.com/uhead/AB/2018/07/11/03/BMjAxODA3MTEwMzEwNThfNzAxNjA4OTQ1XzJfaGQ3MjlfNjYx_s.jpg', 'name': '王者荣耀启大大＆绝地求生', 'description': 'KS电子竞技俱乐部™  创始人🎗 旗下百名队员 \n\n感恩【壹家】一路陪伴❤️不忘初心，方得始终\n\n直播时间：08:00~10:00＆16:00~18:00＆00:00~02:00 \n\n\nQQ：275304142\n\n微信公众號：快手启大大\n\n新🌊围脖：小启同学很可爱 \n\n招募队员、主播关注快手号：mac989898', 'sex': 'M', 'cityName': '', 'following': 0, 'living': False, 'isNew': False, 'privacy': False, 'verifiedStatus': {'verified': False, 'description': '', 'type': 0}, 'countsInfo': {}, 'bannedStatus': {'banned': False, 'socialBanned': False, 'isolate': False, 'defriend': False}}, 'watchingCount': '1.1w'}
Saved to Mongo {'title': '五个射手五排', 'gameName': '王者荣耀', 'playUrls': [{'quality': 'standard', 'url': 'https://tx-pclivemate.pull.yximgs.com/gifshow/L8fI5XLpyys_gn900m.flv?txSecret=11c092d5e1957da35c78204b8b6f12f8&txTime=5b4b15db&stat=JYn7ytKLp28WO0x1Zmnnz2mMGWJOstHMnaWCK4AZwn6sdESfAxOScLAAS%2BUygnJJ&tsc=cdn&highTraffic=1'}, {'quality': 'high', 'url': 'https://tx-pclivemate.pull.yximgs.com/gifshow/L8fI5XLpyys_gn1600m.flv?txSecret=54fff42b32bfa4b57ba19cdf675de60a&txTime=5b4b15db&stat=JYn7ytKLp28WO0x1Zmnnz2mMGWJOstHMnaWCK4AZwn6sdESfAxOScLAAS%2BUygnJJ&tsc=cdn&highTraffic=1'}, {'quality': 'super', 'url': 'https://tx-pclivemate.pull.yximgs.com/gifshow/L8fI5XLpyys.flv?txSecret=7a2acb4ec02b5f89e6f1dc001ab77e3e&txTime=5b4b15db&stat=JYn7ytKLp28WO0x1Zmnnz2mMGWJOstHMnaWCK4AZwn6sdESfAxOScLAAS%2BUygnJJ&highTraffic=1'}], 'user': {'eid': '3x45ncijesdbhsu', 'kwaiId': 'mac56789', 'userId': 701608945, 'id': 'mac56789', 'profile': 'https://tx2.a.yximgs.com/uhead/AB/2018/07/11/03/BMjAxODA3MTEwMzEwNThfNzAxNjA4OTQ1XzJfaGQ3MjlfNjYx_s.jpg', 'name': '王者荣耀启大大＆绝地求生', 'description': 'KS电子竞技俱乐部™  创始人🎗 旗下百名队员 \n\n感恩【壹家】一路陪伴❤️不忘初心，方得始终\n\n直播时间：08:00~10:00＆16:00~18:00＆00:00~02:00 \n\n\nQQ：275304142\n\n微信公众號：快手启大大\n\n新🌊围脖：小启同学很可爱 \n\n招募队员、主播关注快手号：mac989898', 'sex': 'M', 'cityName': '', 'following': 0, 'living': False, 'isNew': False, 'privacy': False, 'verifiedStatus': {'verified': False, 'description': '', 'type': 0}, 'countsInfo': {}, 'bannedStatus': {'banned': False, 'socialBanned': False, 'isolate': False, 'defriend': False}}, 'watchingCount': '1.1w', '_id': ObjectId('5b49c45bbce41a47ed0584f3')}
{'title': '马上国服猴子', 'gameName': '王者荣耀', 'playUrls': [{'quality': 'standard', 'url': 'https://tx-pclivemate.pull.yximgs.com/gifshow/FO6rmwK3Ea8_gn900m.flv?txSecret=57b2feb8ff78a71d09e0cd20406041ef&txTime=5b4b15db&stat=JYn7ytKLp28WO0x1Zmnnz2mMGWJOstHMnaWCK4AZwn6sdESfAxOScLAAS%2BUygnJJ&tsc=cdn&highTraffic=1'}, {'quality': 'high', 'url': 'https://tx-pclivemate.pull.yximgs.com/gifshow/FO6rmwK3Ea8_gn1600m.flv?txSecret=5ba688a55f3b5800673d02d3435aae88&txTime=5b4b15db&stat=JYn7ytKLp28WO0x1Zmnnz2mMGWJOstHMnaWCK4AZwn6sdESfAxOScLAAS%2BUygnJJ&tsc=cdn&highTraffic=1'}, {'quality': 'super', 'url': 'https://tx-pclivemate.pull.yximgs.com/gifshow/FO6rmwK3Ea8_gn3000m.flv?txSecret=01a930e458152fa67be58f3d9b0d0c18&txTime=5b4b15db&stat=JYn7ytKLp28WO0x1Zmnnz2mMGWJOstHMnaWCK4AZwn6sdESfAxOScLAAS%2BUygnJJ&tsc=cdn&highTraffic=1'}, {'quality': 'blueRay', 'url': 'https://tx-pclivemate.pull.yximgs.com/gifshow/FO6rmwK3Ea8.flv?txSecret=ab3b146e8f20a7ddde4d85c4c299d88d&txTime=5b4b15db&stat=JYn7ytKLp28WO0x1Zmnnz2mMGWJOstHMnaWCK4AZwn6sdESfAxOScLAAS%2BUygnJJ&highTraffic=1'}], 'user': {'eid': '3xs4xahg7vhzkhe', 'userId': 343968146, 'id': '3xs4xahg7vhzkhe', 'profile': 'https://tx2.a.yximgs.com/uhead/AB/2017/08/05/21/BMjAxNzA4MDUyMTQwMDFfMzQzOTY4MTQ2XzFfaGQxNDRfMzI1_s.jpg', 'name': '王者荣耀情迷', 'description': '🌐每天中午1点 晚上5点直播\n                 🌟国服孙悟空\n\n                 🌟国服马可波罗\n\n                  Qq：7627774', 'sex': 'M', 'cityName': '', 'following': 0, 'living': False, 'isNew': False, 'privacy': False, 'verifiedStatus': {'verified': False, 'description': '', 'type': 0}, 'countsInfo': {}, 'bannedStatus': {'banned': False, 'socialBanned': False, 'isolate': False, 'defriend': False}}, 'watchingCount': '1.4w'}
Saved to Mongo {'title': '马上国服猴子', 'gameName': '王者荣耀', 'playUrls': [{'quality': 'standard', 'url': 'https://tx-pclivemate.pull.yximgs.com/gifshow/FO6rmwK3Ea8_gn900m.flv?txSecret=57b2feb8ff78a71d09e0cd20406041ef&txTime=5b4b15db&stat=JYn7ytKLp28WO0x1Zmnnz2mMGWJOstHMnaWCK4AZwn6sdESfAxOScLAAS%2BUygnJJ&tsc=cdn&highTraffic=1'}, {'quality': 'high', 'url': 'https://tx-pclivemate.pull.yximgs.com/gifshow/FO6rmwK3Ea8_gn1600m.flv?txSecret=5ba688a55f3b5800673d02d3435aae88&txTime=5b4b15db&stat=JYn7ytKLp28WO0x1Zmnnz2mMGWJOstHMnaWCK4AZwn6sdESfAxOScLAAS%2BUygnJJ&tsc=cdn&highTraffic=1'}, {'quality': 'super', 'url': 'https://tx-pclivemate.pull.yximgs.com/gifshow/FO6rmwK3Ea8_gn3000m.flv?txSecret=01a930e458152fa67be58f3d9b0d0c18&txTime=5b4b15db&stat=JYn7ytKLp28WO0x1Zmnnz2mMGWJOstHMnaWCK4AZwn6sdESfAxOScLAAS%2BUygnJJ&tsc=cdn&highTraffic=1'}, {'quality': 'blueRay', 'url': 'https://tx-pclivemate.pull.yximgs.com/gifshow/FO6rmwK3Ea8.flv?txSecret=ab3b146e8f20a7ddde4d85c4c299d88d&txTime=5b4b15db&stat=JYn7ytKLp28WO0x1Zmnnz2mMGWJOstHMnaWCK4AZwn6sdESfAxOScLAAS%2BUygnJJ&highTraffic=1'}], 'user': {'eid': '3xs4xahg7vhzkhe', 'userId': 343968146, 'id': '3xs4xahg7vhzkhe', 'profile': 'https://tx2.a.yximgs.com/uhead/AB/2017/08/05/21/BMjAxNzA4MDUyMTQwMDFfMzQzOTY4MTQ2XzFfaGQxNDRfMzI1_s.jpg', 'name': '王者荣耀情迷', 'description': '🌐每天中午1点 晚上5点直播\n                 🌟国服孙悟空\n\n                 🌟国服马可波罗\n\n                  Qq：7627774', 'sex': 'M', 'cityName': '', 'following': 0, 'living': False, 'isNew': False, 'privacy': False, 'verifiedStatus': {'verified': False, 'description': '', 'type': 0}, 'countsInfo': {}, 'bannedStatus': {'banned': False, 'socialBanned': False, 'isolate': False, 'defriend': False}}, 'watchingCount': '1.4w', '_id': ObjectId('5b49c45cbce41a47ed0584f4')}

```