# 12306命令行查询

## 模块安装
```
requests， 用于请求12306网站网址
docopt， 解析命令行参数
prettytable， 数据用表格的形式打印在终端
colorama， 为打印在表格中的数据着色
pip install requests prettytable docopt colorama
```

## 网页接口的获取
```
通过Chrome监听点击查询按钮后可以观察到是一个ajax请求，请求方式是get
url请求参数有四个
leftTicketDTO.train_date=2017-05-10 车票日期2017-05-10
leftTicketDTO.from_station=HZH 起点站HZH
leftTicketDTO.to_station=NJH 终点站NJH
purpose_codes=ADULT 车票类型ADULT（成人票）
但车站名称是字母缩写，接下来需要找到这些字母缩写对应的中文名称

打开网站源代码，在网页里面有一个链接带有station-vesion里面包含所有车站的代码
```

## 输出结果：
### python3 stations.py -gd 北京 南京 2018-07-15
```
+------+--------+-------+-------+------+------+----------+------+------+------+------+
| 车次 |  车站  |  时间 |  历时 | 一等 | 二等 | 高级软卧 | 软卧 | 硬卧 | 硬座 | 无座 |
+------+--------+-------+-------+------+------+----------+------+------+------+------+
| G101 | 北京南 | 06:43 | 04:31 |  --  |  7   |    --    |  --  |  有  |  无  |  --  |
|      | 南京南 | 11:14 |       |      |      |          |      |      |      |      |
| G103 | 北京南 | 06:53 | 04:38 |  --  |  无  |    --    |  --  |  有  |  8   |  --  |
|      | 南京南 | 11:31 |       |      |      |          |      |      |      |      |
|  G5  | 北京南 | 07:00 | 03:30 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 10:30 |       |      |      |          |      |      |      |      |
| G57  | 北京南 | 07:15 | 04:32 |  --  |  18  |    --    |  --  |  有  |  有  |  --  |
|      | 南京南 | 11:47 |       |      |      |          |      |      |      |      |
| G105 | 北京南 | 07:20 | 04:31 |  --  |  13  |    --    |  --  |  有  |  有  |  --  |
|      | 南京南 | 11:51 |       |      |      |          |      |      |      |      |
| G143 | 北京南 | 07:50 | 04:05 |  --  |  16  |    --    |  --  |  有  |  有  |  --  |
|      | 南京南 | 11:55 |       |      |      |          |      |      |      |      |
| G19  | 北京南 | 08:00 | 03:24 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 11:24 |       |      |      |          |      |      |      |      |
| G107 | 北京南 | 08:05 | 04:10 |  --  |  20  |    --    |  --  |  有  |  有  |  --  |
|      | 南京南 | 12:15 |       |      |      |          |      |      |      |      |
| G55  | 北京南 | 08:10 | 04:25 |  --  |  无  |    --    |  --  |  无  |  有  |  --  |
|      | 南京南 | 12:35 |       |      |      |          |      |      |      |      |
| G109 | 北京南 | 08:15 | 04:34 |  --  |  5   |    --    |  --  |  有  |  有  |  --  |
|      | 南京南 | 12:49 |       |      |      |          |      |      |      |      |
| G165 | 北京南 | 08:30 | 03:49 |  --  |  7   |    --    |  --  |  无  |  有  |  --  |
|      | 南京南 | 12:19 |       |      |      |          |      |      |      |      |
| G111 | 北京南 | 08:35 | 04:19 |  --  |  12  |    --    |  --  |  有  |  有  |  --  |
|      | 南京南 | 12:54 |       |      |      |          |      |      |      |      |
| G113 | 北京南 | 08:50 | 04:17 |  --  |  2   |    --    |  --  |  19  |  有  |  --  |
|      | 南京南 | 13:07 |       |      |      |          |      |      |      |      |
|  G1  | 北京南 | 09:00 | 03:24 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 12:24 |       |      |      |          |      |      |      |      |
| G41  | 北京南 | 09:15 | 04:14 |  --  |  无  |    --    |  --  |  无  |  有  |  --  |
|      | 南京南 | 13:29 |       |      |      |          |      |      |      |      |
| G115 | 北京南 | 09:20 | 04:18 |  --  |  11  |    --    |  --  |  无  |  有  |  --  |
|      | 南京南 | 13:38 |       |      |      |          |      |      |      |      |
| G117 | 北京南 | 09:25 | 04:39 |  --  |  有  |    --    |  --  |  有  |  有  |  --  |
|      | 南京南 | 14:04 |       |      |      |          |      |      |      |      |
| G33  | 北京南 | 09:40 | 04:37 |  --  |  无  |    --    |  --  |  无  |  有  |  --  |
|      | 南京南 | 14:17 |       |      |      |          |      |      |      |      |
|  G7  | 北京南 | 10:00 | 03:23 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 13:23 |       |      |      |          |      |      |      |      |
| G119 | 北京南 | 10:05 | 04:16 |  --  |  无  |    --    |  --  |  无  |  2   |  --  |
|      | 南京南 | 14:21 |       |      |      |          |      |      |      |      |
| G121 | 北京南 | 10:20 | 04:36 |  --  |  2   |    --    |  --  |  1   |  20  |  --  |
|      | 南京南 | 14:56 |       |      |      |          |      |      |      |      |
| G163 | 北京南 | 10:45 | 05:02 |  --  |  2   |    --    |  --  |  无  |  有  |  --  |
|      | 南京南 | 15:47 |       |      |      |          |      |      |      |      |
| G31  | 北京南 | 11:00 | 03:31 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 14:31 |       |      |      |          |      |      |      |      |
| G123 | 北京南 | 11:05 | 04:07 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 15:12 |       |      |      |          |      |      |      |      |
| G125 | 北京南 | 11:10 | 04:24 |  --  |  无  |    --    |  --  |  1   |  无  |  --  |
|      | 南京南 | 15:34 |       |      |      |          |      |      |      |      |
| G411 | 北京南 | 11:20 | 04:37 |  --  |  无  |    --    |  --  |  有  |  无  |  --  |
|      | 南京南 | 15:57 |       |      |      |          |      |      |      |      |
| G127 | 北京南 | 11:30 | 04:31 |  --  |  无  |    --    |  --  |  2   |  无  |  --  |
|      | 南京南 | 16:01 |       |      |      |          |      |      |      |      |
|  G9  | 北京南 | 12:00 | 03:30 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 15:30 |       |      |      |          |      |      |      |      |
| G129 | 北京南 | 12:10 | 04:16 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 16:26 |       |      |      |          |      |      |      |      |
| G131 | 北京南 | 12:20 | 04:31 |  --  |  11  |    --    |  --  |  无  |  有  |  --  |
|      | 南京南 | 16:51 |       |      |      |          |      |      |      |      |
| G167 | 北京南 | 12:45 | 04:28 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 17:13 |       |      |      |          |      |      |      |      |
| G133 | 北京南 | 12:50 | 04:19 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 17:09 |       |      |      |          |      |      |      |      |
| G135 | 北京南 | 13:05 | 04:25 |  --  |  无  |    --    |  --  |  无  |  2   |  --  |
|      | 南京南 | 17:30 |       |      |      |          |      |      |      |      |
| G137 | 北京南 | 13:35 | 04:15 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 17:50 |       |      |      |          |      |      |      |      |
| G59  | 北京南 | 13:40 | 04:29 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 18:09 |       |      |      |          |      |      |      |      |
| G139 | 北京南 | 13:45 | 04:49 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 18:34 |       |      |      |          |      |      |      |      |
|  G3  | 北京南 | 14:00 | 03:23 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 17:23 |       |      |      |          |      |      |      |      |
| G43  | 北京南 | 14:05 | 04:21 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 18:26 |       |      |      |          |      |      |      |      |
| G141 | 北京南 | 14:10 | 04:28 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 18:38 |       |      |      |          |      |      |      |      |
| G145 | 北京南 | 14:35 | 04:25 |  --  |  1   |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 19:00 |       |      |      |          |      |      |      |      |
| G11  | 北京南 | 15:00 | 03:21 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 18:21 |       |      |      |          |      |      |      |      |
| G35  | 北京南 | 15:10 | 04:20 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 19:30 |       |      |      |          |      |      |      |      |
| G45  | 北京南 | 15:25 | 04:25 |  --  |  1   |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 19:50 |       |      |      |          |      |      |      |      |
| G155 | 北京南 | 15:45 | 04:19 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 20:04 |       |      |      |          |      |      |      |      |
| G147 | 北京南 | 15:50 | 04:36 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 20:26 |       |      |      |          |      |      |      |      |
| G37  | 北京南 | 16:05 | 04:35 |  --  |  5   |    --    |  --  |  无  |  有  |  --  |
|      | 南京南 | 20:40 |       |      |      |          |      |      |      |      |
| G149 | 北京南 | 16:25 | 04:50 |  --  |  无  |    --    |  --  |  有  |  有  |  --  |
|      | 南京南 | 21:15 |       |      |      |          |      |      |      |      |
| G169 | 北京南 | 16:40 | 04:31 |  --  |  6   |    --    |  --  |  1   |  有  |  --  |
|      | 南京南 | 21:11 |       |      |      |          |      |      |      |      |
| G151 | 北京南 | 16:45 | 04:50 |  --  |  15  |    --    |  --  |  有  |  有  |  --  |
|      | 南京南 | 21:35 |       |      |      |          |      |      |      |      |
| G13  | 北京南 | 17:00 | 03:22 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 20:22 |       |      |      |          |      |      |      |      |
| G153 | 北京南 | 17:15 | 04:28 |  --  |  无  |    --    |  --  |  无  |  13  |  --  |
|      | 南京南 | 21:43 |       |      |      |          |      |      |      |      |
| G157 | 北京南 | 17:36 | 04:29 |  --  |  无  |    --    |  --  |  12  |  12  |  --  |
|      | 南京南 | 22:05 |       |      |      |          |      |      |      |      |
| G159 | 北京南 | 17:45 | 04:53 |  --  |  10  |    --    |  --  |  有  |  有  |  --  |
|      | 南京南 | 22:38 |       |      |      |          |      |      |      |      |
| G15  | 北京南 | 18:00 | 03:31 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 21:31 |       |      |      |          |      |      |      |      |
| G203 | 北京南 | 18:35 | 04:35 |  --  |  17  |    --    |  --  |  有  |  有  |  --  |
|      | 南京南 | 23:10 |       |      |      |          |      |      |      |      |
| G17  | 北京南 | 19:00 | 03:13 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 22:13 |       |      |      |          |      |      |      |      |
| G39  | 北京南 | 19:04 | 03:13 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 22:17 |       |      |      |          |      |      |      |      |
| G21  | 北京南 | 19:08 | 03:23 |  --  |  无  |    --    |  --  |  无  |  无  |  --  |
|      | 南京南 | 22:31 |       |      |      |          |      |      |      |      |
| D313 | 北京南 | 19:34 | 09:19 |  --  |  --  |    有    |  --  |  8   |  --  |  --  |
|      |  南京  | 04:53 |       |      |      |          |      |      |      |      |
| D321 |  北京  | 21:04 | 09:32 |  --  |  --  |    有    |  --  |  无  |  --  |  --  |
|      |  南京  | 06:36 |       |      |      |          |      |      |      |      |
| D311 | 北京南 | 21:17 | 09:25 |  有  |  --  |    无    |  --  |  --  |  --  |  --  |
|      |  南京  | 06:42 |       |      |      |          |      |      |      |      |
+------+--------+-------+-------+------+------+----------+------+------+------+------+

```